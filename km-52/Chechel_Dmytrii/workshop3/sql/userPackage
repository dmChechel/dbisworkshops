CREATE OR REPLACE PACKAGE USER_PACKAGE AS
  TYPE T_USER IS RECORD (
  NAME VARCHAR2(30 CHAR),
  EMAIL VARCHAR2(30 CHAR)
  );

  TYPE T_USER_TABLE IS TABLE OF T_USER;

  FUNCTION LOG_IN(USER_EMAIL IN USERS.EMAIL%TYPE)
    RETURN T_USER_TABLE PIPELINED;

  PROCEDURE REGISTER(USER_EMAIL IN USERS.EMAIL%TYPE, USER_NAME IN USERS.NAME%TYPE);
END;

CREATE OR REPLACE PACKAGE BODY USER_PACKAGE AS
  FUNCTION LOG_IN(USER_EMAIL IN USERS.EMAIL%TYPE)
    RETURN T_USER_TABLE PIPELINED AS
    CURSOR MY_CUR IS
      SELECT *
      FROM USERS
      WHERE USERS.EMAIL = USER_EMAIL;
    BEGIN
      FOR rec IN MY_CUR
      LOOP
        pipe row (rec);
      end loop;
    END;

  PROCEDURE REGISTER(USER_EMAIL IN USERS.EMAIL%TYPE, USER_NAME IN USERS.NAME%TYPE) AS
    BEGIN
      INSERT INTO USERS (NAME, EMAIL) VALUES (USER_NAME, USER_EMAIL);
    END;

END;

SELECT *
FROM TABLE (USER_PACKAGE.LOG_IN('sdgsdgs@fasfas.com'));
